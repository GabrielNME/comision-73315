<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" crossorigin="anonymous">
  <script src="https://kit.fontawesome.com/c0d4216b19.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>
  <header>
    <img src="../img/logo.png" alt="Logo">
    <nav>
      <a href="../index.html" class="fuente-blanca">Inicio</a>
      <a href="./tienda.html" class="fuente-blanca">Tienda</a>
      <a href="./contacto.html" class="fuente-blanca">Contacto</a>
      <a href="./carrito.html" class="fuente-blanca">Carrito</a>
    </nav>
  </header>
  <main id="tienda">
    <!-- Filtro de producto -->
    <aside class="filtro">
      <h4 class="mb-3">Filtro de búsqueda</h4>

      <div class="mb-3" data-categoria="generacion">
        <h5>Generación</h5>
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-outline-secondary btn-sm" data-filtro="primera">Primera</button>
          <button class="btn btn-outline-secondary btn-sm" data-filtro="tercera">Tercera</button>
        </div>
      </div>

      <div class="mb-3" data-categoria="precio">
        <h5>Precio</h5>
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-outline-secondary btn-sm" data-filtro="0-500">0 - 500</button>
          <button class="btn btn-outline-secondary btn-sm" data-filtro="501-1000">501 - 1000</button>
        </div>
      </div>

      <div class="mb-3" data-categoria="tipo">
        <h5>Tipo</h5>
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-outline-secondary btn-sm" data-filtro="eléctrico">Eléctrico</button>
          <button class="btn btn-outline-secondary btn-sm" data-filtro="fuego">Fuego</button>
        </div>
      </div>

      <div class="mb-3" data-categoria="color">
        <h5>Tipo</h5>
        <div class="d-flex flex-wrap gap-2">
          <button class="btn btn-outline-secondary btn-sm" data-filtro="amarillo">Amarillo</button>
          <button class="btn btn-outline-secondary btn-sm" data-filtro="rojo">Rojo</button>
        </div>
      </div>
    </aside>

    <!-- Productos -->
    <section class="productos">
      <h2>Productos</h2>
      <div class="grilla-productos">
        <div class="carta-producto" data-generacion="primera" data-precio="999" data-tipo="eléctrico"
          data-color="amarillo">
          <img src="../img/pikachu.webp" alt="Nombre del producto" class="producto-img">
          <h3 class="producto-nombre">Pikachu</h3>
          <p class="producto-precio">$999</p>
          <button class="producto-comprar"><a href="./producto.html" class="fuente-blanca">Comprar</a></button>
        </div>
        <div class="carta-producto" data-generacion="tercera" data-precio="450" data-tipo="fuego" data-color="rojo">
          <img src="../img/infernape.webp" alt="Nombre del producto" class="producto-img">
          <h3 class="producto-nombre">Infernape</h3>
          <p class="producto-precio">$450</p>
          <button class="producto-comprar"><a href="./producto.html" class="fuente-blanca">Comprar</a></button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-logo"><img src="../img/logo.png" alt="logo"></div>
    <div class="separador"></div>
    <article class="footer-contacto">
      <div><i class="icono fa-solid fa-location-dot"></i><span>Direccion 1</span></div>
      <div><i class="icono fa-solid fa-location-dot"></i><span>Direccion 2</span></div>
      <div><i class="icono fa-regular fa-envelope"></i><span>E-mail</span></div>
    </article>
    <div class="separador"></div>
    <article class="footer-redes">
      <div><i class="icono fa-brands fa-square-facebook"></i><span>Facebook </span></div>
      <div><i class="icono fa-brands fa-instagram"></i><span>Instagram </span></div>
      <div><i class="icono fa-brands fa-whatsapp"></i><span>Whatsapp </span></div>
    </article>
    <div class="separador"></div>
    <article class="footer-legal">
      <div><i class="icono fa-solid fa-box-archive"></i><span>Aviso legal</span></div>
      <div><i class="icono fa-solid fa-box-archive"></i><span>Terminos y condiciones</span></div>
      <div><i class="icono fa-solid fa-box-archive"></i><span>Defensa al consumidor</span></div>
    </article>
  </footer>

  <script>
    const filtrosActivos = {
      generacion: [],
      precio: [],
      tipo: [],
      color: []
    };

    const botonesFiltro = document.querySelectorAll('.filtro button');
    const productos = document.querySelectorAll('.carta-producto');

    botonesFiltro.forEach(boton => {
      boton.addEventListener('click', () => {
        const categoria = boton.closest('[data-categoria]').dataset.categoria;
        const valor = boton.dataset.filtro;

        if (filtrosActivos[categoria].includes(valor)) {
          filtrosActivos[categoria] = filtrosActivos[categoria].filter(v => v !== valor);
          boton.classList.remove('active');
        } else {
          filtrosActivos[categoria].push(valor);
          boton.classList.add('active');
        }

        filtrarProductos();
      });
    });

    function filtrarProductos() {
      productos.forEach(producto => {
        let mostrar = true;

        for (const categoria in filtrosActivos) {
          const filtros = filtrosActivos[categoria];
          const valorProducto = producto.dataset[categoria];

          if (filtros.length > 0) {
            if (categoria === "precio") {
              const precio = parseFloat(valorProducto);
              const coincide = filtros.some(rango => {
                const [min, max] = rango.split("-").map(Number);
                return precio >= min && precio <= max;
              });
              if (!coincide) mostrar = false;
            } else {
              if (!filtros.includes(valorProducto)) mostrar = false;
            }
          }
        }

        producto.style.display = mostrar ? "block" : "none";
      });
    }
  </script>
</body>

</html>